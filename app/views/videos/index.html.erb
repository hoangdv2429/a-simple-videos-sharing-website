<p id="notice"><%= notice %></p>

<% @categories.each do |category| %>
  <%= link_to category.category, videos_path(:cate => category.id) %>
<% end %>

<%= form_tag videos_path, :method => 'get' do %>
  <%= text_field_tag :search, params[:search], :placeholder => 'Search' %>
  <%= submit_tag 'Search' %>
<% end %>

<h1>Videos</h1>

<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Description</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @videos.each do |video| %>
      <tr>
        <td><%= video.title %></td>
        <td><%= video.description %></td>
        <td><%= link_to 'Show', video %></td>
        <td><%= link_to 'Edit', edit_video_path(video) %></td>
        <td><%= link_to 'Destroy', video, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<% if @videos.count == 0%>
  <h1> there are no videos belongs to this category :< !!　申し訳ございません</h1>

<% else %>	

	<div class="row">

		<% @videos.each do |video| %>

			<div class="col-md-1">
				<a href="/videos/<%= video.id %>">
					<%= image_tag(video.thumbnail, size: "250", data: { title: video.title }) %>
          <strong><%= video.title %></strong>
				</a>
        <br>
        <td><%= ActiveStorage::Analyzer::VideoAnalyzer.new(video.clip.blob).metadata[:duration]%></td>
        <td><%= video.description %></td>
			</div>	

		<% end %>

	</div>
<%end%>

<br>
 
<%= link_to 'New Video', new_video_path %>
